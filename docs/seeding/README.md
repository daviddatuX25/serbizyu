# Seeding Pipeline

This folder contains the seeding system for populating the application with listings, images, and reviews.

## Files

### Production Files (Required)
- **`seeder.json`** - Data configuration file containing all listings, images, workflows, and reviews. Generated by the Python script below.
- **`generate-and-fill-seeder-v2.py`** - Python script that generates `seeder.json` with:
  - 20 listings (14 services @ 70%, 6 offers @ 30%)
  - 2-3 images per listing
  - Clean category names (no underscores)
  - Workflow steps with durations (in minutes)
  - 2-5 reviews per listing
  - Automatic review distribution based on listing type

### Artisan Commands
The following Laravel artisan commands use `seeder.json`:

1. **Generate listings and images:**
   ```bash
   php artisan seed:from-json --file=docs/seeding/seeder.json
   ```
   Creates services/offers with images from seeder.json

2. **Seed reviews:**
   ```bash
   php artisan app:seed-reviews-from-json
   ```
   Creates service reviews from the reviews data in seeder.json

### Complete Seeding Workflow
```bash
# 1. Fresh database with base data
php artisan migrate:fresh --seed --no-interaction

# 2. Generate seeder.json (if needed)
cd docs/seeding && python generate-and-fill-seeder-v2.py

# 3. Seed listings with images
php artisan seed:from-json --file=docs/seeding/seeder.json --no-interaction

# 4. Seed service reviews
php artisan app:seed-reviews-from-json
```

### Documentation
- `COMPLETE_SEEDING_SYSTEM.md` - Detailed system documentation
- `SEEDING_SYSTEM.md` - System overview
- `json-structure-analysis.md` - JSON file structure reference

## Key Features

✅ 70/30 service-to-offer ratio maintained
✅ Multiple images per listing (2-3 each)
✅ Clean category names (e.g., "Agriculture and Landscaping" not "Agriculture_and_Landscaping")
✅ Workflow steps with duration_minutes for realistic workflow timing
✅ Verified purchase reviews with tags and ratings
✅ Automatic image upload to media library
✅ Proper relationship setup between listings and workflows

## Notes

- Images must exist in `listing_seeder/` directory for seeding to work
- Only jpg, jpeg, png, gif formats are supported (webp not supported)
- Categories are auto-created if they don't exist
- Duplicate listings are skipped automatically
