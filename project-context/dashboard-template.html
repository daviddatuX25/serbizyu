<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serbizyu Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    
    <!-- Icons (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        [x-cloak] { display: none !important; }
        
        /* Custom Scrollbar for sidebar - hidden by default for cleaner look */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Diamond Shape Utility */
        .diamond-shape {
            transform: rotate(45deg);
            transition: all 0.3s ease;
        }
        .diamond-inner {
            transform: rotate(-45deg);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e1e1e',
                        secondary: '#f3f4f6',
                        accent: '#3b82f6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans antialiased"
      x-data="{ 
          mobileMenuOpen: false, 
          searchActive: false,
          notificationsOpen: true,
          activePopover: null,
          
          togglePopover(id) {
              if (this.activePopover === id) {
                  this.activePopover = null;
              } else {
                  this.activePopover = id;
              }
          }
      }">

    <!-- Mobile Overlay -->
    <div x-show="mobileMenuOpen" 
         x-transition:enter="transition-opacity ease-linear duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition-opacity ease-linear duration-300"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-gray-900/80 z-40 lg:hidden"
         @click="mobileMenuOpen = false" x-cloak></div>

    <!-- SIDEBAR CONTAINER -->
    <aside 
        class="fixed top-0 bottom-0 left-0 z-50 bg-white border-r border-gray-200 transition-all duration-300 ease-in-out flex flex-col overflow-visible"
        :class="{
            'translate-x-0 w-64': mobileMenuOpen, 
            '-translate-x-full w-64': !mobileMenuOpen,
            'md:translate-x-0 md:w-20 lg:w-72': true
        }"
    >
        <!-- Sidebar Header -->
        <div class="h-20 flex items-center justify-between px-6 md:px-0 md:justify-center lg:justify-start lg:px-6 border-b border-gray-100 md:border-none">
            <div class="flex items-center gap-2">
                <!-- Logo Circle -->
                <div class="w-10 h-10 rounded-full border-2 border-gray-800 flex items-center justify-center shrink-0">
                    <div class="w-6 h-6 bg-gray-800 rounded-full"></div>
                </div>
                <span class="font-bold text-xl tracking-tight md:hidden lg:block">Logo</span>
            </div>
            <!-- Mobile Close Button -->
            <button @click="mobileMenuOpen = false" class="md:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-full">
                <i data-lucide="x"></i>
            </button>
        </div>

        <!-- Sidebar Navigation -->
        <nav class="flex-1 overflow-y-auto md:overflow-visible py-6 flex flex-col gap-6 md:items-center lg:items-stretch px-4 md:px-0 lg:px-4 relative">
            
            <!-- Menu Items Group -->
            <div class="space-y-6 w-full flex flex-col md:items-center lg:items-stretch relative">
                
                <!-- Item 1: Dashboard -->
                <a href="#" class="group flex items-center gap-4 md:justify-center lg:justify-start w-full">
                    <div class="w-12 h-12 border border-gray-300 rotate-45 flex items-center justify-center group-hover:bg-gray-800 group-hover:border-gray-800 transition-colors duration-300 shadow-sm bg-white shrink-0">
                        <i data-lucide="layout-dashboard" class="-rotate-45 w-5 h-5 text-gray-600 group-hover:text-white"></i>
                    </div>
                    <span class="font-medium text-gray-600 group-hover:text-gray-900 md:hidden lg:block whitespace-nowrap">Dashboard</span>
                </a>

                <!-- Item 2: Services -->
                <a href="#" class="group flex items-center gap-4 md:justify-center lg:justify-start w-full">
                    <div class="w-12 h-12 border border-gray-300 rotate-45 flex items-center justify-center group-hover:bg-gray-800 group-hover:border-gray-800 transition-colors duration-300 shadow-sm bg-white shrink-0">
                        <i data-lucide="briefcase" class="-rotate-45 w-5 h-5 text-gray-600 group-hover:text-white"></i>
                    </div>
                    <span class="font-medium text-gray-600 group-hover:text-gray-900 md:hidden lg:block whitespace-nowrap">Services</span>
                </a>

                <!-- Item 3: Open Offers -->
                <div class="relative group flex items-center gap-4 md:justify-center lg:justify-start w-full cursor-pointer"
                     @click="togglePopover('bids')">
                    <div class="w-12 h-12 border border-gray-300 rotate-45 flex items-center justify-center hover:bg-gray-800 hover:border-gray-800 transition-colors duration-300 shadow-sm bg-white shrink-0"
                         :class="{'bg-gray-800 border-gray-800': activePopover === 'bids'}">
                        <i data-lucide="files" class="-rotate-45 w-5 h-5 text-gray-600" :class="{'text-white': activePopover === 'bids'}"></i>
                    </div>
                    
                    <div class="flex flex-col md:hidden lg:flex whitespace-nowrap">
                        <span class="font-medium text-gray-600 group-hover:text-gray-900">Open Offers</span>
                        <span class="text-xs text-gray-400 pl-2 border-l-2 border-gray-300 ml-0.5 mt-1">â†³ Bids</span>
                    </div>

                    <!-- Popover -->
                    <div x-show="activePopover === 'bids'" 
                         @click.away="activePopover = null"
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 translate-x-2"
                         x-transition:enter-end="opacity-100 translate-x-0"
                         class="absolute left-[4.5rem] top-0 z-[100] bg-white border border-gray-200 shadow-xl rounded-2xl p-4 w-48 md:block lg:hidden hidden">
                        <h3 class="font-bold text-gray-800 mb-2">Bids</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="hover:bg-gray-50 p-1 rounded cursor-pointer">View active bids</li>
                            <li class="hover:bg-gray-50 p-1 rounded cursor-pointer">Create new offer</li>
                        </ul>
                        <div class="absolute top-4 -left-2 w-4 h-4 bg-white border-l border-b border-gray-200 transform rotate-45"></div>
                    </div>
                </div>

                <!-- Item 4: Workflows -->
                <a href="#" class="group flex items-center gap-4 md:justify-center lg:justify-start w-full">
                    <div class="w-12 h-12 border border-gray-300 rotate-45 flex items-center justify-center group-hover:bg-gray-800 group-hover:border-gray-800 transition-colors duration-300 shadow-sm bg-white shrink-0">
                        <i data-lucide="git-branch" class="-rotate-45 w-5 h-5 text-gray-600 group-hover:text-white"></i>
                    </div>
                    <span class="font-medium text-gray-600 group-hover:text-gray-900 md:hidden lg:block whitespace-nowrap">Workflows</span>
                </a>

            </div>

            <!-- Notifications Section -->
            <div class="mt-auto w-full pt-6 md:pt-0 lg:pt-6 relative group">
                <div @click="notificationsOpen = !notificationsOpen; togglePopover('notif')" 
                     class="flex items-center justify-between cursor-pointer px-2 md:justify-center lg:justify-between md:px-0 lg:px-2">
                    
                     <div class="md:flex lg:hidden hidden w-12 h-12 border border-gray-300 rotate-45 items-center justify-center bg-white relative shrink-0">
                        <i data-lucide="bell" class="-rotate-45 w-5 h-5 text-gray-600"></i>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"></span>
                     </div>

                     <div class="md:hidden lg:flex items-center gap-2 w-full whitespace-nowrap">
                         <span class="font-bold text-gray-800">Notifications</span>
                         <i data-lucide="chevron-down" 
                            class="w-4 h-4 text-gray-400 transition-transform duration-200"
                            :class="{'rotate-180': notificationsOpen}"></i>
                     </div>
                </div>

                <div x-show="notificationsOpen" 
                     x-collapse
                     class="mt-4 space-y-3 pl-2 md:hidden lg:block">
                    <div class="flex items-start gap-2 text-sm text-gray-500">
                        <div class="w-1.5 h-1.5 rounded-full bg-gray-400 mt-1.5 shrink-0"></div>
                        <p>Get worked up...</p>
                    </div>
                </div>

                <div x-show="activePopover === 'notif'" 
                     @click.away="activePopover = null"
                     x-transition:enter="transition ease-out duration-200"
                     x-transition:enter-start="opacity-0 translate-x-2"
                     x-transition:enter-end="opacity-100 translate-x-0"
                     class="absolute left-[4.5rem] bottom-0 z-[100] bg-white border border-gray-200 shadow-xl rounded-2xl p-4 w-64 md:block lg:hidden hidden">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-bold text-gray-800">Notifications</h3>
                        <button class="text-xs text-blue-500">Clear all</button>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-start gap-2 text-sm text-gray-500">
                            <div class="w-2 h-2 rounded-full bg-blue-500 mt-1.5 shrink-0"></div>
                            <p>Get worked up on the new proposal.</p>
                        </div>
                    </div>
                    <div class="absolute bottom-6 -left-2 w-4 h-4 bg-white border-l border-b border-gray-200 transform rotate-45"></div>
                </div>
            </div>

        </nav>

        <!-- User Profile (Bottom) -->
        <div class="p-4 border-t border-gray-100 md:border-none lg:border-t md:p-2 lg:p-4 relative group">
            <!-- Clickable Profile Button -->
            <div @click="togglePopover('profile')"
                 class="flex items-center gap-3 md:justify-center lg:justify-start p-2 rounded-xl hover:bg-gray-50 cursor-pointer border border-gray-200 md:border-0 lg:border transition-all relative z-10"
                 :class="{'bg-gray-50 border-gray-300': activePopover === 'profile'}">
                <div class="w-10 h-10 rounded-full bg-gray-200 overflow-hidden shrink-0">
                     <svg class="w-full h-full text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                     </svg>
                </div>
                <div class="flex flex-col md:hidden lg:flex whitespace-nowrap">
                    <span class="text-sm font-bold text-gray-900">David</span>
                    <span class="text-xs text-gray-500">Greetings</span>
                </div>
            </div>

            <!-- Profile Popup Menu -->
            <div x-show="activePopover === 'profile'" 
                 @click.away="activePopover = null"
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 translate-y-2"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 x-transition:leave="transition ease-in duration-150"
                 x-transition:leave-start="opacity-100 translate-y-0"
                 x-transition:leave-end="opacity-0 translate-y-2"
                 class="absolute z-[100] bg-white border border-gray-200 shadow-xl rounded-2xl p-1 w-full 
                        bottom-[calc(100%+0.5rem)] left-0 right-0 
                        md:bottom-2 md:left-[4.5rem] md:w-48 md:right-auto 
                        lg:bottom-[calc(100%+0.5rem)] lg:left-0 lg:right-0 lg:w-full">
                
                <div class="flex flex-col gap-1">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 hover:bg-gray-50 rounded-xl text-sm font-medium text-gray-700 transition-colors">
                        <i data-lucide="user" class="w-4 h-4 text-gray-500"></i>
                        Profile
                    </a>
                    <div class="h-px bg-gray-100 my-0.5"></div>
                    <a href="#" class="flex items-center gap-3 px-3 py-2 hover:bg-red-50 rounded-xl text-sm font-medium text-red-600 transition-colors">
                        <i data-lucide="log-out" class="w-4 h-4 text-red-500"></i>
                        Logout
                    </a>
                </div>

                <!-- Decorative Arrow (Adjusted for positioning) -->
                <!-- Up arrow for Mobile/Desktop -->
                <div class="absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-white border-b border-r border-gray-200 rotate-45 md:hidden lg:block"></div>
                <!-- Left arrow for Tablet -->
                <div class="hidden md:block lg:hidden absolute bottom-6 -left-1.5 w-3 h-3 bg-white border-l border-b border-gray-200 rotate-45"></div>
            </div>
        </div>
    </aside>


    <!-- MAIN CONTENT -->
    <main 
        class="min-h-screen transition-all duration-300 ease-in-out bg-white"
        :class="{
            'md:ml-20 lg:ml-72': true 
        }"
    >
        <!-- TOP HEADER -->
        <header class="sticky top-0 z-30 bg-white/90 backdrop-blur-sm px-4 py-4 md:px-8 md:py-6 border-b border-gray-100 md:border-none">
            <div class="flex items-center justify-between relative h-14">

                <!-- Mobile Hamburger & Logo (Left) -->
                <div class="flex items-center gap-4 w-auto transition-opacity duration-300 shrink-0" :class="{'opacity-0': searchActive}">
                    <button @click="mobileMenuOpen = true" class="p-2 -ml-2 text-gray-600 md:hidden">
                        <i data-lucide="menu"></i>
                    </button>
                    
                </div>

                <!-- CENTERED GROUP: Search Icon + Nav Pill -->
                <div 
                    class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center gap-2 md:gap-6 transition-all duration-500 z-20"
                    :class="{
                        'w-[95%] md:w-[600px] justify-start': searchActive,
                        'w-auto max-w-[350px] sm:max-w-none justify-center': !searchActive /* Adjusted mobile max-width for safety */
                    }"
                >
                    <!-- Search Element -->
                    <div class="relative flex items-center transition-all duration-500 ease-out shrink-0"
                        :class="{'flex-1 h-12 bg-white border-2 border-gray-800 rounded-full px-4 shadow-sm': searchActive}">
                        
                        <!-- Sparkle Icon Trigger -->
                        <button 
                            x-show="!searchActive" 
                            @click="searchActive = true; $nextTick(() => $refs.searchInput.focus())"
                            class="p-2 hover:bg-gray-50 rounded-full transition-colors shrink-0"
                        >
                            <i data-lucide="sparkles" class="w-6 h-6 text-gray-900"></i>
                        </button>

                        <!-- Active Search Input -->
                        <div x-show="searchActive" x-cloak class="flex-1 flex items-center h-full overflow-hidden w-full">
                            <i data-lucide="sparkles" class="w-5 h-5 text-gray-800 mr-3 shrink-0"></i>
                            <div class="flex-1 flex flex-col justify-center h-full">
                                <input 
                                    x-ref="searchInput"
                                    type="text" 
                                    placeholder="Generate insight..." 
                                    class="w-full bg-transparent outline-none text-gray-700 placeholder-gray-500 font-medium h-full"
                                >
                                <span class="text-[10px] text-gray-400 leading-none pb-1 hidden md:block">
                                    See the sales in this year
                                </span>
                            </div>
                            <button @click.stop="searchActive = false" class="ml-2 p-1 rounded-full hover:bg-gray-100 text-gray-500">
                                <i data-lucide="x" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>

                    <!-- NAV PILL (Scrollable Horizontal on Mobile) -->
                    <!-- 
                         Updates: 
                         - Added overflow-x-auto & scrollbar-hide
                         - Added max-w constraints to force scroll on small screens if needed
                         - Added extra items (History, Trends, Settings)
                    -->
                    <div 
                        x-show="!searchActive" 
                        class="flex items-center bg-white border-2 border-gray-800 rounded-full px-1 py-1 transition-all duration-300 origin-right md:origin-left shrink overflow-x-auto scrollbar-hide max-w-[250px] sm:max-w-[300px] md:max-w-none"
                        x-transition:enter="transition ease-out duration-300"
                        x-transition:enter-start="opacity-0 scale-90 translate-x-4"
                        x-transition:enter-end="opacity-100 scale-100 translate-x-0"
                        x-transition:leave="transition ease-in duration-200"
                        x-transition:leave-start="opacity-100 scale-100"
                        x-transition:leave-end="opacity-0 scale-90"
                    >
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full bg-gray-800 text-white text-sm md:text-sm font-medium transition-all shrink-0">Home</a>
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full hover:bg-gray-100 text-gray-600 text-sm md:text-sm font-medium transition-all shrink-0">Browse</a>
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full hover:bg-gray-100 text-gray-600 text-sm md:text-sm font-medium transition-all shrink-0">About</a>
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full hover:bg-gray-100 text-gray-600 text-sm md:text-sm font-medium transition-all shrink-0">Others</a>
                        <!-- Extra Items for Scroll Demo -->
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full hover:bg-gray-100 text-gray-600 text-sm md:text-sm font-medium transition-all shrink-0">History</a>
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full hover:bg-gray-100 text-gray-600 text-sm md:text-sm font-medium transition-all shrink-0">Trends</a>
                        <a href="#" class="px-4 md:px-5 py-1 md:py-2 rounded-full hover:bg-gray-100 text-gray-600 text-sm md:text-sm font-medium transition-all shrink-0">Settings</a>
                    </div>
                </div>

            </div>
            
            <!-- AI Prompt Suggestions (Dropdown) -->
            <div x-show="searchActive" 
                 x-transition:enter="transition ease-out duration-300 delay-100"
                 x-transition:enter-start="opacity-0 -translate-y-2"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 class="absolute top-20 left-1/2 transform -translate-x-1/2 bg-white border border-gray-200 shadow-xl rounded-2xl p-6 w-[90%] md:w-[600px] z-20">
                <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">Suggested Prompts</h4>
                <ul class="space-y-3">
                    <li class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer group">
                        <div class="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center group-hover:bg-blue-100">
                            <i data-lucide="trending-up" class="w-4 h-4 text-blue-600"></i>
                        </div>
                        <span class="text-sm text-gray-700">Show me sales trends for Q3</span>
                    </li>
                    <li class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer group">
                        <div class="w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center group-hover:bg-purple-100">
                            <i data-lucide="users" class="w-4 h-4 text-purple-600"></i>
                        </div>
                        <span class="text-sm text-gray-700">Analyze new user acquisition</span>
                    </li>
                </ul>
            </div>
        </header>

        <!-- DASHBOARD CONTENT AREA -->
        <div class="p-4 md:p-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-2xl border border-gray-100 shadow-sm h-64 flex items-center justify-center text-gray-300">
                    Content Block
                </div>
                <div class="bg-white p-6 rounded-2xl border border-gray-100 shadow-sm h-64 flex items-center justify-center text-gray-300">
                    Content Block
                </div>
                <div class="bg-white p-6 rounded-2xl border border-gray-100 shadow-sm h-64 flex items-center justify-center text-gray-300">
                    Content Block
                </div>
            </div>
        </div>

    </main>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>